# Minimal Dockerfile for GoReleaser
# Uses pre-built binary, no build stage needed

FROM alpine:latest

RUN apk --no-cache add ca-certificates

# Create non-root user
RUN adduser -D -h /home/goclaw goclaw

WORKDIR /home/goclaw

# Copy pre-built binary from GoReleaser
COPY goclaw /usr/local/bin/

# Copy entrypoint script for first-run setup
COPY docker/entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

USER goclaw

EXPOSE 1337

ENTRYPOINT ["/entrypoint.sh"]
